---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: dorismonitors.al-assad.github.io
spec:
  group: al-assad.github.io
  names:
    kind: DorisMonitor
    listKind: DorisMonitorList
    plural: dorismonitors
    singular: dorismonitor
  scope: Namespaced
  versions:
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: DorisMonitor is the Schema for the Doris cluster monitors API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: DorisMonitorSpec defines the desired state of DorisMonitor
            properties:
              cluster:
                description: Reference of the target DorisCluster
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                type: object
              grafana:
                description: GrafanaSpec defines the desired state of Grafana
                properties:
                  adminPassword:
                    description: Default grafana admin password
                    type: string
                  adminUser:
                    description: Default grafana admin username
                    type: string
                  claims:
                    description: "Claims lists the names of resources, defined in
                      spec.resourceClaims, that are used by this container. \n This
                      is an alpha field and requires enabling the DynamicResourceAllocation
                      feature gate. \n This field is immutable. It can only be set
                      for containers."
                    items:
                      description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                      properties:
                        name:
                          description: Name must match the name of one entry in pod.spec.resourceClaims
                            of the Pod where this field is used. It makes that resource
                            available inside a container.
                          type: string
                      required:
                      - name
                      type: object
                    type: array
                    x-kubernetes-list-map-keys:
                    - name
                    x-kubernetes-list-type: map
                  image:
                    description: Image tags of the grafana
                    type: string
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: 'Limits describes the maximum amount of compute resources
                      allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: 'Requests describes the minimum amount of compute
                      resources required. If Requests is omitted for a container,
                      it defaults to Limits if that is explicitly specified, otherwise
                      to an implementation-defined value. Requests cannot exceed Limits.
                      More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                    type: object
                  service:
                    description: MonitorServiceSpec defines the service of prometheus
                      and grafana
                    properties:
                      externalTrafficPolicy:
                        description: 'ExternalTrafficPolicy of the service Optional:
                          Defaults to omitted'
                        type: string
                      httpPort:
                        description: 'Expose the http query port of prometheus or
                          grafana Optional: Defaults to 0'
                        type: integer
                      type:
                        description: Type of the real kubernetes service
                        type: string
                    type: object
                required:
                - image
                type: object
              imagePullPolicy:
                description: ImagePullPolicy of DorisMonitor Pods
                type: string
              imagePullSecrets:
                description: ImagePullSecrets is an optional list of references to
                  secrets in the same namespace to use for pulling any of the images.
                items:
                  description: LocalObjectReference contains enough information to
                    let you locate the referenced object inside the same namespace.
                  properties:
                    name:
                      description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        TODO: Add other useful fields. apiVersion, kind, uid?'
                      type: string
                  type: object
                  x-kubernetes-map-type: atomic
                type: array
              persistent:
                description: Persistent determines DorisMinitor persists monitor data
                  or not Defaults to true
                type: boolean
              prometheus:
                description: PrometheusSpec defines the desired state of Prometheus
                properties:
                  claims:
                    description: "Claims lists the names of resources, defined in
                      spec.resourceClaims, that are used by this container. \n This
                      is an alpha field and requires enabling the DynamicResourceAllocation
                      feature gate. \n This field is immutable. It can only be set
                      for containers."
                    items:
                      description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                      properties:
                        name:
                          description: Name must match the name of one entry in pod.spec.resourceClaims
                            of the Pod where this field is used. It makes that resource
                            available inside a container.
                          type: string
                      required:
                      - name
                      type: object
                    type: array
                    x-kubernetes-list-map-keys:
                    - name
                    x-kubernetes-list-type: map
                  commandOptions:
                    description: 'CommandOptions is the additional prometheus CLI
                      command option Ref: https://prometheus.io/docs/prometheus/latest/configuration/configuration/'
                    items:
                      type: string
                    type: array
                  image:
                    description: Image tags of the prometheus
                    type: string
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: 'Limits describes the maximum amount of compute resources
                      allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                    type: object
                  logLevel:
                    description: LogLevel is Prometheus log level
                    type: string
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: 'Requests describes the minimum amount of compute
                      resources required. If Requests is omitted for a container,
                      it defaults to Limits if that is explicitly specified, otherwise
                      to an implementation-defined value. Requests cannot exceed Limits.
                      More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                    type: object
                  retentionTime:
                    description: Prometheus data retention time
                    type: string
                  service:
                    description: Service defines a Kubernetes service of Prometheus
                    properties:
                      externalTrafficPolicy:
                        description: 'ExternalTrafficPolicy of the service Optional:
                          Defaults to omitted'
                        type: string
                      httpPort:
                        description: 'Expose the http query port of prometheus or
                          grafana Optional: Defaults to 0'
                        type: integer
                      type:
                        description: Type of the real kubernetes service
                        type: string
                    type: object
                required:
                - image
                type: object
              replicas:
                description: Replicas is the number of desired replicas. Defaults
                  to 1
                format: int32
                type: integer
              storageClassName:
                description: StorageClassName of the persistent volume for monitor
                  data storage. Kubernetes default storage class is used if not setting
                  this field.
                type: string
              tolerations:
                description: Tolerations of the Doris initializer Pod
                items:
                  description: The pod this Toleration is attached to tolerates any
                    taint that matches the triple <key,value,effect> using the matching
                    operator <operator>.
                  properties:
                    effect:
                      description: Effect indicates the taint effect to match. Empty
                        means match all taint effects. When specified, allowed values
                        are NoSchedule, PreferNoSchedule and NoExecute.
                      type: string
                    key:
                      description: Key is the taint key that the toleration applies
                        to. Empty means match all taint keys. If the key is empty,
                        operator must be Exists; this combination means to match all
                        values and all keys.
                      type: string
                    operator:
                      description: Operator represents a key's relationship to the
                        value. Valid operators are Exists and Equal. Defaults to Equal.
                        Exists is equivalent to wildcard for value, so that a pod
                        can tolerate all taints of a particular category.
                      type: string
                    tolerationSeconds:
                      description: TolerationSeconds represents the period of time
                        the toleration (which must be of effect NoExecute, otherwise
                        this field is ignored) tolerates the taint. By default, it
                        is not set, which means tolerate the taint forever (do not
                        evict). Zero and negative values will be treated as 0 (evict
                        immediately) by the system.
                      format: int64
                      type: integer
                    value:
                      description: Value is the taint value the toleration matches
                        to. If the operator is Exists, the value should be empty,
                        otherwise just a regular string.
                      type: string
                  type: object
                type: array
            required:
            - cluster
            - replicas
            type: object
          status:
            description: DorisMonitorStatus defines the observed state of DorisMonitor
            properties:
              grafanaServiceRef:
                description: ResourceRef contains the k8s resource ref info.
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                type: object
              prometheusServiceRef:
                description: ResourceRef contains the k8s resource ref info.
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                type: object
              statefulSet:
                description: StatefulSetStatus represents the current state of a StatefulSet.
                nullable: true
                properties:
                  availableReplicas:
                    description: Total number of available pods (ready for at least
                      minReadySeconds) targeted by this statefulset.
                    format: int32
                    type: integer
                  collisionCount:
                    description: collisionCount is the count of hash collisions for
                      the StatefulSet. The StatefulSet controller uses this field
                      as a collision avoidance mechanism when it needs to create the
                      name for the newest ControllerRevision.
                    format: int32
                    type: integer
                  conditions:
                    description: Represents the latest available observations of a
                      statefulset's current state.
                    items:
                      description: StatefulSetCondition describes the state of a statefulset
                        at a certain point.
                      properties:
                        lastTransitionTime:
                          description: Last time the condition transitioned from one
                            status to another.
                          format: date-time
                          type: string
                        message:
                          description: A human readable message indicating details
                            about the transition.
                          type: string
                        reason:
                          description: The reason for the condition's last transition.
                          type: string
                        status:
                          description: Status of the condition, one of True, False,
                            Unknown.
                          type: string
                        type:
                          description: Type of statefulset condition.
                          type: string
                      required:
                      - status
                      - type
                      type: object
                    type: array
                  currentReplicas:
                    description: currentReplicas is the number of Pods created by
                      the StatefulSet controller from the StatefulSet version indicated
                      by currentRevision.
                    format: int32
                    type: integer
                  currentRevision:
                    description: currentRevision, if not empty, indicates the version
                      of the StatefulSet used to generate Pods in the sequence [0,currentReplicas).
                    type: string
                  observedGeneration:
                    description: observedGeneration is the most recent generation
                      observed for this StatefulSet. It corresponds to the StatefulSet's
                      generation, which is updated on mutation by the API Server.
                    format: int64
                    type: integer
                  readyReplicas:
                    description: readyReplicas is the number of pods created for this
                      StatefulSet with a Ready Condition.
                    format: int32
                    type: integer
                  replicas:
                    description: replicas is the number of Pods created by the StatefulSet
                      controller.
                    format: int32
                    type: integer
                  updateRevision:
                    description: updateRevision, if not empty, indicates the version
                      of the StatefulSet used to generate Pods in the sequence [replicas-updatedReplicas,replicas)
                    type: string
                  updatedReplicas:
                    description: updatedReplicas is the number of Pods created by
                      the StatefulSet controller from the StatefulSet version indicated
                      by updateRevision.
                    format: int32
                    type: integer
                required:
                - replicas
                type: object
              statefulSetRef:
                description: ResourceRef contains the k8s resource ref info.
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
